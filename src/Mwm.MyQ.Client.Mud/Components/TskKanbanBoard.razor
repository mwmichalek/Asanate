@inherits Mwm.MyQ.Client.Mud.Components.ModelConsumerComponent<TskModel, Tsk>
@using Mwm.MyQ.Client.Mud.Helpers
@using Mwm.MyQ.Client.Service.Models
@using Mwm.MyQ.Client.Service.Store.State.Shared
@using Mwm.MyQ.Domain;
@using Mwm.MyQ.Client.Mud.Components

@if (IsLoading()) {
    <div class="spinner-border" role="status">
        <span class="sr-only alert-light">Loading...</span>
    </div>
}
@if (HasErrors()) {
    <span class="text-light">Whoops! Looks like an issue occurred loading TskModels</span>
} else if (HasValues()) {

    <MudDropContainer T="TskModel" 
                      Items="FilteredTskModels" 
                      Class="d-flex flex-wrap flex-grow-1"
                      ItemsSelector="@((item,dropzone) => item.Status.ToStr() == dropzone)"  >
                          <!-- 
        
        ItemDropped="ItemUpdated"
    -->
        <ChildContent>
            @foreach (var status in Statuses) {
                var dropzone = status.ToStr();
                <MudPaper Class="ma-4 flex-grow-1">
                     <MudList Clickable="true" Class="d-flex flex-column mud-height-full">
                         <MudListSubheader>Drop Zone @dropzone</MudListSubheader>
                         <MudDropZone T="TskModel" Identifier="@dropzone" Class="flex-grow-1" />
                     </MudList>
                 </MudPaper>
             }
        </ChildContent>
        <ItemRenderer>
            <MudListItem Text="@context.Name"/>
        </ItemRenderer>
    </MudDropContainer>



    <span>@FilteredTskModels.Count()</span>
    
}

