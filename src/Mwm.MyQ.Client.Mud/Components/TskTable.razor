@inherits Mwm.MyQ.Client.Mud.Components.ModelConsumerComponent<TskModel, Tsk>
@using Mwm.MyQ.Domain;
@using Mwm.MyQ.Client.Service.Models

<MudTable Items="@FilteredTskModels" 
          FixedHeader="true"
          Hover="true" SortLabel="Sort By">
    <HeaderContent>
        <MudTh><MudTableSortLabel SortBy="new Func<TskModel, object>(x=>x.CompanyNameAndProjectName)">Project</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="new Func<TskModel, object>(x=>x.InitiativeName)">Initiative</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="new Func<TskModel, object>(x=>x.Name)">Name</MudTableSortLabel></MudTh>
        <MudTh><MudTableSortLabel SortBy="new Func<TskModel, object>(x=>x.Status)">Status</MudTableSortLabel></MudTh>
        <MudTh>Actions</MudTh>
    </HeaderContent>
    <RowTemplate>
        <MudTd DataLabel="Project">@context.CompanyNameAndProjectName</MudTd>
        <MudTd DataLabel="Initiative">@context.InitiativeName</MudTd>
        <MudTd DataLabel="Name">@context.Name</MudTd>
        <MudTd DataLabel="Status">@context.Status.ToStr()</MudTd>
        <MudTd DataLabel="Actions">
            <MudIconButton Icon="@Icons.Filled.Edit" 
                           Color="Color.Primary" 
                           aria-label="Edit" 
                           OnClick="@(() => Edit(@context))" />
            @if (@context.Status != Status.Done) {
                <MudIconButton Icon="@Icons.Filled.Check" 
                           Color="Color.Primary" 
                           aria-label="Complete" 
                           OnClick="@(() => Complete(@context))" />
            } else {
                <MudIconButton Icon="@Icons.Filled.Archive" 
                           Color="Color.Primary" 
                           aria-label="Archive" 
                           OnClick="@(() => Archive(@context))" />
            }
        </MudTd>
    </RowTemplate>
</MudTable>


