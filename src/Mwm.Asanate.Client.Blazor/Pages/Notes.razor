@inherits Fluxor.Blazor.Web.Components.FluxorComponent
@using Syncfusion.Blazor.Popups
@using Syncfusion.Blazor.Inputs
@using Syncfusion.Blazor.RichTextEditor
@using Syncfusion.Blazor.Calendars
@using Syncfusion.Blazor.DropDowns
@using Mwm.Asanate.Client.Blazor.Models.Shared

@page "/notes"

@SelectedProjectId

<div class="root-container">
    <div class="d-flex flex-row justify-content-center">
        <div class="row">
            <EditForm id="form" Model="@NewTskModel" OnValidSubmit="@Save">
                <DataAnnotationsValidator />
                <ValidationSummary />
                <div class="form-row">
                    <div class="form-group col-md-3">
                        <SfDropDownList TValue="int" TItem="DropDownEntity" @bind-Value="@SelectedProjectId" DataSource="@ProjectDropDownEntities">
                          <DropDownListFieldSettings Value="Id" Text="Name"></DropDownListFieldSettings>
                        </SfDropDownList>
                    </div>
                    <div class="form-group col-md-3">
                        <SfDropDownList TValue="int" TItem="DropDownEntity" @bind-Value="@SelectedInitiativeId" DataSource="@InitiativeDropDownEntities">
                          <DropDownListFieldSettings Value="Id" Text="Name"></DropDownListFieldSettings>
                        </SfDropDownList>
                    </div>
                    <div class="form-group col-md-6">
                        <label for="name">Name:</label>
                        <SfTextBox Id="name" class="form-control" Placeholder="Name" @bind-Value="@NewTskModel.Name" @onkeydown="KeyboardEventHandler"></SfTextBox>
                    </div>
                </div>

            </EditForm>
         </div>
         @foreach (var savedTskModel in SavedTskModels) {
            <div class="row">
              <div class="col-md-3">@savedTskModel.ProjectName</div>
              <div class="col-md-3">@savedTskModel.InitiativeName</div>
              <div class="col-md-3">@savedTskModel.Name</div>
              <div class="col-md-3">@savedTskModel.DurationEstimate</div>
            </div>
         }
    </div>
</div>